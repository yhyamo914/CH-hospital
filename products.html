<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª | Ù…ØªØ¬Ø± Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
    --primary:#1e40af; /* Ø£Ø²Ø±Ù‚ Ø£ØºÙ…Ù‚ */
    --accent:#6366f1; /* Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ ÙØ§ØªØ­ */
    --dark:#1f2937;
    --light:#f3f4f6;
    --radius:20px;
    --shadow:0 14px 35px rgba(0,0,0,.15);
    --hover-shadow:0 20px 50px rgba(0,0,0,.2);
}

/* Reset & Global */
*{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif;}
body{
    background:var(--light);
    color:var(--dark);
    min-height:100vh;
    display:flex;
    flex-direction:column;
    margin-bottom:90px;
    transition: background .3s, color .3s;
}

/* ===== TOP BAR ===== */
.topbar{
    position:fixed;
    top:0;
    right:0;
    left:0;
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:white;
    box-shadow:0 6px 25px rgba(0,0,0,.15);
    z-index:1000;
    transition: background .4s;
}
.topbar-container{
    max-width:1200px;
    margin:auto;
    padding:14px 20px;
    display:flex;
    align-items:center;
    justify-content:space-between;
}
.logo{
    font-weight:700;
    font-size:22px;
    color:white;
    text-decoration:none;
}
.nav{
    display:flex;
    gap:20px;
}
.nav a{
    text-decoration:none;
    color:white;
    font-weight:600;
    position:relative;
    padding:6px 8px;
    transition: color .3s;
}
.nav a::after{
    content:"";
    position:absolute;
    bottom:0;
    left:0;
    height:3px;
    width:0;
    background:white;
    border-radius:2px;
    transition:width .3s;
}
.nav a:hover::after{width:100%;}
.nav a:hover{color:#fce38a;}

/* ===== PAGE ===== */
.page{padding-top:95px;flex:1;}
.container{max-width:1200px;margin:auto;padding:20px;}
h1{text-align:center;color:var(--primary);margin-bottom:30px;font-size:32px;text-shadow:1px 1px 3px rgba(0,0,0,.15);}

/* ===== FILTERS ===== */
.filters{
    display:flex;
    justify-content:center;
    gap:12px;
    margin-bottom:30px;
    flex-wrap:wrap;
}
.filters button{
    padding:10px 24px;
    border:none;
    border-radius:50px;
    background:white;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,.08);
    transition:.4s;
}
.filters button.active,
.filters button:hover{
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:white;
    transform:translateY(-2px);
    box-shadow:var(--hover-shadow);
}

/* ===== DROPDOWN ===== */
.dropdown{position:relative;display:inline-block;}
.dropbtn{
    padding:10px 24px;
    border:none;
    border-radius:50px;
    background:white;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,.08);
    transition:.4s;
}
.dropbtn.active,
.dropbtn:hover{
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:white;
    transform:translateY(-2px);
    box-shadow:var(--hover-shadow);
}
.dropdown-content{
    display:none;
    position:absolute;
    background:white;
    min-width:160px;
    box-shadow:0 10px 20px rgba(0,0,0,.15);
    border-radius:15px;
    z-index:100;
    flex-direction:column;
    overflow:hidden;
}
.dropdown-content button{
    background:white;
    color:var(--dark);
    padding:12px 18px;
    border:none;
    text-align:right;
    width:100%;
    cursor:pointer;
    transition:.3s;
}
.dropdown-content button:hover{
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:white;
}
.dropdown:hover .dropdown-content{display:flex;}

/* ===== PRODUCTS ===== */
.products-wrapper{display:flex;justify-content:center;}
.products-grid{width:100%;max-width:1000px;display:flex;flex-direction:column;gap:25px;}
.products-row{display:flex;gap:16px;overflow-x:auto;padding-bottom:15px;scroll-behavior: smooth;scroll-snap-type:x mandatory;}
.product-card{
    background:white;
    width:200px;
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    overflow:hidden;
    cursor:pointer;
    transition:.35s ease;
    flex-shrink:0;
    position:relative;
    border:1px solid #e5e7eb;
}
.product-card:hover{
    transform:translateY(-10px) scale(1.05);
    box-shadow:var(--hover-shadow);
}
.product-card img{width:100%;height:140px;object-fit:cover;transition:.3s;}
.product-card:hover img{transform:scale(1.08);}
.product-info{padding:14px;text-align:center;transition:.3s;}
.product-info h3{font-size:16px;margin-bottom:8px;color:var(--dark);}
.price{color:var(--primary);font-weight:700;font-size:15px;}

/* ===== MODAL ===== */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:2000;transition:.3s;}
.modal.show{display:flex}
.modal-content{
    background:white;
    width:95%;
    max-width:750px;
    border-radius:25px;
    padding:25px;
    position:relative;
    display:flex;
    flex-direction:column;
    gap:15px;
    animation:fadeIn 0.4s ease;
}
@keyframes fadeIn{
    from{opacity:0; transform:translateY(-20px);}
    to{opacity:1; transform:translateY(0);}
}
.close{position:absolute;top:15px;left:15px;font-size:24px;cursor:pointer;color:var(--primary);}
.modal-images{display:flex;overflow-x:auto;gap:12px;scroll-behavior: smooth;}
.modal-images img{height:270px;border-radius:16px;object-fit:cover;transition:.3s;}
.modal-images img:hover{transform:scale(1.05);}
.modal-nav{display:flex;justify-content:space-between;margin-top:12px;}
.modal-nav button{padding:10px 16px;background:var(--primary);color:white;border:none;border-radius:10px;cursor:pointer;transition:.3s;}
.modal-nav button:hover{background:var(--accent);}
.modal-body{margin-top:10px}
.modal-body h2{color:var(--primary);margin-bottom:10px;font-size:24px;}
.actions{display:flex;gap:12px;margin-top:10px;flex-wrap:wrap;}
.btn{flex:1;padding:14px;border-radius:50px;text-align:center;color:white;font-weight:600;text-decoration:none;transition:.3s;}
.whatsapp{background:#25d366}
.book{background:linear-gradient(90deg,var(--primary),var(--accent))}
.btn:hover{opacity:.9;transform:translateY(-2px)}

/* ===== FOOTER ===== */
footer{
    background:#111827;
    color:#e5e7eb;
    padding:50px 20px 20px;
}
.footer-container{
    max-width:1200px;
    margin:auto;
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:30px;
}
.footer-box h3{color:var(--accent);margin-bottom:12px;font-size:18px;}
.footer-box p,
.footer-box a{
    color:#d1d5db;
    font-size:14px;
    line-height:1.8;
    text-decoration:none;
}
.footer-bottom{text-align:center;margin-top:25px;border-top:1px solid #374151;padding-top:12px;font-size:13px;}

/* ===== BOTTOM NAV ===== */
.bottom-nav{
    display:flex;
    position:fixed;
    bottom:0;
    width:100%;
    background:white;
    justify-content:space-around;
    padding:8px 0;
    box-shadow:0 -3px 20px rgba(0,0,0,.12);
    z-index:1000;
}
.bottom-nav a{
    text-decoration:none;
    color:#333;
    font-size:18px;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    position:relative;
    padding:6px 0;
    transition:.3s;
}
.bottom-nav a i{font-size:22px;margin-bottom:2px;}
.bottom-nav a:hover{color:var(--primary);}
.cart-badge{
    position:absolute;
    top:0;
    right:6px;
    background:red;
    color:#fff;
    font-size:10px;
    padding:2px 6px;
    border-radius:50%;
    display:none;
}

/* ===== SOCIAL FLOATING ===== */
.social-float{
    position:fixed;
    top:50%;
    left:15px;
    transform:translateY(-50%);
    display:flex;
    flex-direction:column;
    gap:14px;
    z-index:2000;
}
.social{
    width:50px;
    height:50px;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:50%;
    color:#fff;
    font-size:22px;
    text-decoration:none;
    box-shadow:0 8px 25px rgba(0,0,0,.25);
    transition:.3s ease;
}
.social:hover{transform:scale(1.18);}
.social.facebook{background:#1877f2;}
.social.tiktok{background:#000;position:relative;}
.social.tiktok::after{content:"";position:absolute;inset:-2px;border-radius:50%;background:linear-gradient(45deg,#25F4EE,#FE2C55);z-index:-1;}
.social.instagram{background:linear-gradient(45deg,#f58529,#dd2a7b,#8134af,#515bd4);}

/* ===== ENHANCED PRODUCT SLIDER ===== */
.products-row::-webkit-scrollbar{display:none;}
.product-card::after{
    content:"";
    position:absolute;
    inset:0;
    background:linear-gradient(to top,rgba(0,0,0,.3),transparent);
    opacity:0;
    transition:.3s;
}
.product-card:hover::after{opacity:1;}

/* ===== SECTION TITLES ===== */
.products-grid h4{
    font-size:22px;
    margin:25px 0 12px;
    padding-right:10px;
    border-right:5px solid var(--primary);
}
.products-grid h5{
    font-size:16px;
    margin:12px 0 6px;
    color:var(--accent);
}

/* ===== SLIDER CONTROLS ===== */
.slider-controls{
    display:flex;
    justify-content:space-between;
    margin:-10px 0 10px;
}
.slider-controls button{
    background:var(--primary);
    color:white;
    border:none;
    width:40px;
    height:40px;
    border-radius:50%;
    cursor:pointer;
    transition:.3s;
}
.slider-controls button:hover{background:var(--accent);}

/* ===== MOBILE ===== */
@media(max-width:768px){
    .social{width:40px;height:40px;font-size:18px;}
    .nav{display:none;}
}
/* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ ÙÙŠ Ø§Ù„Ø¯ÙŠØ³ÙƒØªÙˆØ¨ */
@media (min-width: 769px){
    .bottom-nav{
        display:none !important;
    }
}/* ===== MOBILE FILTER DROPDOWN ===== */
@media(max-width:768px){
  .filters{display:none;} /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© */
  
  .mobile-filters{
    position:relative;
    margin:10px auto;
    max-width:300px;
  }
  .mobile-filter-btn{
    width:100%;
    padding:10px 15px;
    border:none;
    border-radius:50px;
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:white;
    font-weight:600;
    cursor:pointer;
    text-align:center;
  }
  .mobile-filter-content{
    display:none;
    flex-direction:column;
    background:white;
    box-shadow:0 6px 12px rgba(0,0,0,.15);
    border-radius:12px;
    margin-top:6px;
    overflow:hidden;
  }
  .mobile-filter-content button{
    padding:10px 14px;
    border:none;
    background:white;
    cursor:pointer;
    text-align:right;
  }
  .mobile-filter-content button:hover{
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:white;
  }
  .mobile-filter-content.show{display:flex;}
}

/* ===== MOBILE & RESPONSIVE PRODUCT CARDS ===== */
@media(max-width:480px){
    .products-row{
        gap:8px;
        padding:12px 5px 20px;
    }
    .product-card{
        min-width:45%; /* ÙŠØ¸Ù‡Ø± ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ Ø¨Ø·Ø§Ù‚ØªÙŠÙ† ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø© */
    }
}

@media(min-width:481px) and (max-width:768px){
    .products-row{
        gap:10px;
        padding:12px 10px 20px;
    }
    .product-card{
        min-width:10%; /* ÙŠØ¸Ù‡Ø± ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ Ø«Ù„Ø§Ø« Ø¨Ø·Ø§Ù‚Ø§Øª ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø© */
    }
}

@media(min-width:769px) and (max-width:1024px){
    .products-row{
        gap:16px;
        padding:15px 10px 20px;
    }
    .product-card{
        min-width:200px; /* Ù„Ù„ØªØ§Ø¨Ù„Øª 3-4 Ø¨Ø·Ø§Ù‚Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ø´Ø§Ø´Ø© */
    }
    .mobile-submenu .sub-content{
    display:none;
    flex-direction:column;
    padding-left:10px;
}
.mobile-submenu .sub-btn{
    width:100%;
    padding:10px 14px;
    border:none;
    background:white;
    cursor:pointer;
    text-align:right;
    font-weight:600;
}
.mobile-submenu .sub-btn.active::after{
    content:"â–²";
    float:left;
}
.mobile-submenu .sub-btn::after{
    content:"â–¼";
    float:left;
}
.mobile-submenu .sub-content button{
    padding:8px 12px;
    border:none;
    background:white;
    cursor:pointer;
    text-align:right;
    font-weight:400;
}
.mobile-submenu .sub-content button:hover{
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:white;
}

}
.mobile-filter-content .sub-content{
    display:none;
    flex-direction:column;
    padding-left:10px;
}
.mobile-filter-content .sub-content button{
    padding:8px 14px;
    font-size:14px;
}
.mobile-filter-content button.main-cat-btn{
    font-weight:600;
}
.mobile-filter-content button.main-cat-btn.active + .sub-content{
    display:flex;
}
    /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ© ÙÙŠ Ù†Ø³Ø®Ø© Ø§Ù„Ø¯ÙŠØ³ÙƒØªÙˆØ¨ */
@media (min-width: 769px) {
  .mobile-filters  {
    display: none !important;
  }
}


</style>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

</head>
<body>

<div class="topbar">
    <div class="topbar-container">
        <a href="index.html" class="logo">ğŸ’» CH-hospital </a>
        <div class="nav">
            <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="products.html">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
            <a href="appointment.html">Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯</a>
        </div>
    </div>
</div>

<div class="page">
<div class="container">
    <h1>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
    <div class="filters">
        <button class="active" data-cat="all">Ø§Ù„ÙƒÙ„</button>
        <button data-cat="Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±">Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</button>
        <button data-cat="Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„Ø§Ø¨ØªÙˆØ¨">Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„Ø§Ø¨ØªÙˆØ¨</button>
        <button data-cat="Ø´Ø§Ø´Ø§Øª">Ø´Ø§Ø´Ø§Øª</button>
<button data-cat="Ù…Ø§ÙˆØ³Ø§Øª">Ù…Ø§ÙˆØ³Ø§Øª</button>

        <div class="dropdown">
            <button class="dropbtn" data-cat="Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª">Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª â–¼</button>
            <div class="dropdown-content">
                <button data-cat="ÙƒÙŠØ¨ÙˆØ±Ø¯">ÙƒÙŠØ¨ÙˆØ±Ø¯</button>
                <button data-cat="Ù…Ø§ÙˆØ³">Ù…Ø§ÙˆØ³</button>
                <button data-cat="Ø³Ù…Ø§Ø¹Ø§Øª">Ø³Ù…Ø§Ø¹Ø§Øª</button>
                <button data-cat="Ù„ÙˆØ­Ø§Øª Ù…ÙØ§ØªÙŠØ­">Ù„ÙˆØ­Ø§Øª Ù…ÙØ§ØªÙŠØ­</button>
                <button data-cat="ÙƒØ§Ø¨Ù„Ø§Øª">ÙƒØ§Ø¨Ù„Ø§Øª</button>
                <button data-cat="Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†">Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†</button>
            </div>
        </div>
        <button data-cat="ÙƒØ§Ù…ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©">ÙƒØ§Ù…ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©</button>
    </div>
<div class="mobile-filters">
  <button class="mobile-filter-btn">ØªØµÙÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª â–¼</button>
  <div class="mobile-filter-content">
    <button data-cat="all">Ø§Ù„ÙƒÙ„</button>
    <button data-cat="Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±">Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</button>
    <button data-cat="Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„Ø§Ø¨ØªÙˆØ¨">Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù„Ø§Ø¨ØªÙˆØ¨</button>
    <button data-cat="Ø´Ø§Ø´Ø§Øª">Ø´Ø§Ø´Ø§Øª</button>
    

    <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª -->
    <div class="mobile-submenu">
      <button class="sub-btn">Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª â–¼</button>
      <div class="sub-content">
        <button data-cat="ÙƒÙŠØ¨ÙˆØ±Ø¯">ÙƒÙŠØ¨ÙˆØ±Ø¯</button>
        <button data-cat="Ù…Ø§ÙˆØ³Ø§Øª">Ù…Ø§ÙˆØ³</button>
        <button data-cat="Ø³Ù…Ø§Ø¹Ø§Øª">Ø³Ù…Ø§Ø¹Ø§Øª</button>
        <button data-cat="Ù„ÙˆØ­Ø§Øª Ù…ÙØ§ØªÙŠØ­">Ù„ÙˆØ­Ø§Øª Ù…ÙØ§ØªÙŠØ­</button>
        <button data-cat="ÙƒØ§Ø¨Ù„Ø§Øª">ÙƒØ§Ø¨Ù„Ø§Øª</button>
        <button data-cat="Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†">Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†</button>
      </div>
    </div>

    <button data-cat="ÙƒØ§Ù…ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©">ÙƒØ§Ù…ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©</button>
  </div>
</div>

    <div class="products-wrapper">
        <div class="products-grid" id="productsGrid"></div>
    </div>

</div>
</div>

<div class="modal" id="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">âœ–</span>
        <div class="modal-images" id="mImages"></div>
        <div class="modal-nav">
            <button id="prevBtn">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <button id="nextBtn">Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
        <div class="modal-body">
            <h2 id="mName"></h2>
            <p><strong>Ø§Ù„Ø³Ø¹Ø±:</strong> <span id="mPrice"></span> Ø¬.Ù…</p>
            <p><strong>Ø§Ù„Ù‚Ø³Ù…:</strong> <span id="mCat"></span></p>
            <p id="mDesc"></p>
            <div class="actions">
                <a id="waBtn" class="btn whatsapp" target="_blank">ÙˆØ§ØªØ³Ø§Ø¨</a>
                <a href="appointment.html" class="btn book">Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯</a>
                <a id="cartBtn" class="btn book">Ø£Ø¶Ù Ù„Ù„Ø¹Ø±Ø¨Ø©</a>
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="footer-container">
        <div class="footer-box">
            <h3>Ù…Ù† Ù†Ø­Ù†</h3>
            <p>Ù…ØªØ¬Ø± Ù…ØªØ®ØµØµ ÙÙŠ Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙˆØ§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª.</p>
        </div>
        <div class="footer-box">
            <h3>Ø§Ù„ØªÙˆØ§ØµÙ„</h3>
            <p>ğŸ“ <a href="tel:201120400187">+20 112 040 0187</a></p>
        </div>
        <div class="footer-box">
            <h3>Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯</h3>
            <a href="#" target="_blank">discord.gg/YOUR_SERVER</a>
        </div>
    </div>
    <div class="footer-bottom">Â© 2025 Ù…ØªØ¬Ø± Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±</div>
</footer>

<!-- Bottom Nav -->
<!-- Bottom Nav -->
<div class="bottom-nav">
  <a href="index.html"><i class="fas fa-home"></i><span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></a>
  <a href="products.html"><i class="fas fa-laptop"></i><span>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</span></a>
  <a href="cart.html"><i class="fas fa-shopping-cart"></i><span>Ø§Ù„Ø¹Ø±Ø¨Ø©</span><span id="cartCount" class="cart-badge">0</span></a>
  <a href="appointment.html"><i class="fas fa-calendar"></i><span>Ù…ÙˆØ¹Ø¯</span></a>
  <a href="profile.html" id="profileNav"><i class="fas fa-user"></i><span>Ø­Ø³Ø§Ø¨ÙŠ</span></a>
  <a href="admin.html" id="adminNav" style="display:none"><i class="fas fa-cogs"></i><span>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span></a>
</div>

<script>
firebase.initializeApp({
    apiKey:"AIzaSyCxZZ4dYqrxJ_rlMcXmZhx5Kwg_ZeYnYog",
    authDomain:"computer-store-4c946.firebaseapp.com",
    projectId:"computer-store-4c946"
});
const db=firebase.firestore();
const auth=firebase.auth();
const grid=document.getElementById("productsGrid");
const modal=document.getElementById("modal");
let products=[];
let currentImageIndex=0;
let currentProduct=null;

// localStorage helpers
function getLocalCart(){ return JSON.parse(localStorage.getItem("cart")) || {}; }
function saveLocalCart(c){ localStorage.setItem("cart", JSON.stringify(c)); }

// Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø¹Ø±Ø¨Ø©
function addToCart(product){
    auth.onAuthStateChanged(async user=>{
        if(user){
            const cartRef = db.collection("users").doc(user.uid).collection("cart");
            const doc = await cartRef.where("name","==",product.name).get();
            if(!doc.empty){
                const id=doc.docs[0].id;
                const prevQty=doc.docs[0].data().quantity || 1;
                await cartRef.doc(id).update({quantity: prevQty+1});
            }else{
                await cartRef.add({
                    name: product.name,
                    price: product.price,
                    category: product.category,
                    image: product.image || (product.images && product.images[0]) || "",
                    quantity:1,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
            }
            alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø¹Ø±Ø¨Ø©!");
        }else{
            const cart=getLocalCart();
            if(cart[product.name]){
                cart[product.name].quantity +=1;
            }else{
                cart[product.name]={
                    name: product.name,
                    price: product.price,
                    category: product.category,
                    image: product.image || (product.images && product.images[0]) || "",
                    quantity:1
                };
            }
            saveLocalCart(cart);
            alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø¹Ø±Ø¨Ø©!");
        }
    });
}

function openModal(p){
    currentProduct=p;
    const mImages=document.getElementById("mImages");
    mImages.innerHTML="";
    if(p.images && p.images.length){
        p.images.forEach(url=>{
            const img=document.createElement("img");
            img.src=url;
            mImages.appendChild(img);
        });
    }else if(p.image){
        const img=document.createElement("img");
        img.src=p.image;
        mImages.appendChild(img);
    }
    currentImageIndex=0;
    showImage(currentImageIndex);

    document.getElementById("mName").textContent=p.name;
    document.getElementById("mPrice").textContent=p.price;
    document.getElementById("mCat").textContent=p.category;
    document.getElementById("mDesc").textContent=p.desc||"";
    document.getElementById("waBtn").href=`https://wa.me/201120400187?text=${encodeURIComponent(p.name)}`;

    modal.classList.add("show");

    document.getElementById("prevBtn").onclick=()=>prevImage();
    document.getElementById("nextBtn").onclick=()=>nextImage();
    document.getElementById("cartBtn").onclick=()=>addToCart(p);
}

function closeModal(){modal.classList.remove("show");}
function showImage(index){
    const imgs=document.querySelectorAll("#mImages img");
    imgs.forEach((img,i)=>img.style.display=(i===index)?"block":"none");
}
function prevImage(){
    const imgs=document.querySelectorAll("#mImages img");
    if(imgs.length===0)return;
    currentImageIndex=(currentImageIndex-1+imgs.length)%imgs.length;
    showImage(currentImageIndex);
}
function nextImage(){
    const imgs=document.querySelectorAll("#mImages img");
    if(imgs.length===0)return;
    currentImageIndex=(currentImageIndex+1)%imgs.length;
    showImage(currentImageIndex);
}
function wrapRowWithControls(row){
    const wrapper = document.createElement("div");

    const controls = document.createElement("div");
    controls.className = "slider-controls";

    const left = document.createElement("button");
    left.innerHTML = "â®";
    left.onclick = () => row.scrollBy({ left: -300, behavior: "smooth" });

    const right = document.createElement("button");
    right.innerHTML = "â¯";
    right.onclick = () => row.scrollBy({ left: 300, behavior: "smooth" });

    controls.appendChild(left);
    controls.appendChild(right);

    wrapper.appendChild(controls);
    wrapper.appendChild(row);

    return wrapper;
}


function render(cat="all"){
    grid.innerHTML="";
    let filtered = products.slice();

    // Ø§Ù„ÙÙ„ØªØ±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…
    if(cat !== "all"){
        if(cat==="Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª" || ["ÙƒÙŠØ¨ÙˆØ±Ø¯","Ù…Ø§ÙˆØ³","Ø³Ù…Ø§Ø¹Ø§Øª","Ù„ÙˆØ­Ø§Øª Ù…ÙØ§ØªÙŠØ­","ÙƒØ§Ø¨Ù„Ø§Øª","Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†"].includes(cat)){
            filtered = filtered.filter(p => p.category==="Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª");
            if(cat!=="Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª"){
                filtered = filtered.filter(p => 
                    (p.subCategory || p.name).toLowerCase().includes(cat.toLowerCase())
                );
            }
            const row = document.createElement("div");
            row.className = "products-row";
            filtered.forEach(p=>{
                const imgSrc = p.image || (p.images && p.images[0]) || 'placeholder.png';
                const c = document.createElement("div");
                c.className="product-card";
                c.innerHTML=`<img src="${imgSrc}"><div class="product-info"><h3>${p.name}</h3><div class="price">${p.price} Ø¬.Ù…</div></div>`;
                c.onclick=()=>openModal(p);
                row.appendChild(c);
            });
            grid.appendChild(wrapRowWithControls(row));
            return;
        } else {
            filtered = filtered.filter(p => p.category === cat);
            const row = document.createElement("div");
            row.className = "products-row";
            filtered.forEach(p=>{
                const imgSrc = p.image || (p.images && p.images[0]) || 'placeholder.png';
                const c = document.createElement("div");
                c.className="product-card";
                c.innerHTML=`<img src="${imgSrc}"><div class="product-info"><h3>${p.name}</h3><div class="price">${p.price} Ø¬.Ù…</div></div>`;
                c.onclick=()=>openModal(p);
                row.appendChild(c);
            });
            grid.appendChild(wrapRowWithControls(row));
            return;
        }
    }

    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙƒÙ„
    const grouped = {};
    filtered.forEach(p=>{
        const key = p.category;
        if(!grouped[key]) grouped[key] = [];
        grouped[key].push(p);
    });

    for(const key in grouped){
        const title = document.createElement("h4");
        title.textContent = key;
        title.style.color = "#4361ee";
        title.style.margin = "10px 0 5px 0";
        grid.appendChild(title);

        if(key==="Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª"){
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø¨Ø´ÙƒÙ„ ÙØ±Ø¹ÙŠ
            const subGrouped = {};
            grouped[key].forEach(p=>{
                const subKey = p.subCategory || 
                    (p.name.toLowerCase().includes("ÙƒÙŠØ¨ÙˆØ±Ø¯") ? "ÙƒÙŠØ¨ÙˆØ±Ø¯" :
                    p.name.toLowerCase().includes("Ù…Ø§ÙˆØ³") ? "Ù…Ø§ÙˆØ³" :
                    p.name.toLowerCase().includes("Ø³Ù…Ø§Ø¹Ø§Øª") ? "Ø³Ù…Ø§Ø¹Ø§Øª" :
                    p.name.toLowerCase().includes("Ù„ÙˆØ­Ø§Øª Ù…ÙØ§ØªÙŠØ­") ? "Ù„ÙˆØ­Ø§Øª Ù…ÙØ§ØªÙŠØ­" :
                    p.name.toLowerCase().includes("ÙƒØ§Ø¨Ù„Ø§Øª") ? "ÙƒØ§Ø¨Ù„Ø§Øª" :
                    p.name.toLowerCase().includes("Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†") ? "Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ†" :
                    "ÙØ±Ø¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯");
                if(!subGrouped[subKey]) subGrouped[subKey] = [];
                subGrouped[subKey].push(p);
            });

            for(const subKey in subGrouped){
                const subTitle = document.createElement("h5");
                subTitle.textContent = subKey;
                subTitle.style.color = "#4cc9f0";
                subTitle.style.margin = "5px 0";
                grid.appendChild(subTitle);

                const subRow = document.createElement("div");
                subRow.className = "products-row";
                subGrouped[subKey].forEach(p=>{
                    const imgSrc = p.image || (p.images && p.images[0]) || 'placeholder.png';
                    const c = document.createElement("div");
                    c.className="product-card";
                    c.innerHTML=`<img src="${imgSrc}"><div class="product-info"><h3>${p.name}</h3><div class="price">${p.price} Ø¬.Ù…</div></div>`;
                    c.onclick=()=>openModal(p);
                    subRow.appendChild(c);
                });
                grid.appendChild(subRow);
            }
        } else {
            const row = document.createElement("div");
            row.className = "products-row";
            grouped[key].forEach(p=>{
                const imgSrc = p.image || (p.images && p.images[0]) || 'placeholder.png';
                const c = document.createElement("div");
                c.className="product-card";
                c.innerHTML=`<img src="${imgSrc}"><div class="product-info"><h3>${p.name}</h3><div class="price">${p.price} Ø¬.Ù…</div></div>`;
                c.onclick=()=>openModal(p);
                row.appendChild(c);
            });
            grid.appendChild(wrapRowWithControls(row));
        }
    }
}

// Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Firebase
db.collection("products").get().then(s=>{
    s.forEach(d=>{
        let data=d.data();
        if(data.image && !data.images) data.images=[data.image];
        products.push(data);
    });
    render();
});

// ÙØ±Ø² Ø­Ø³Ø¨ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
document.querySelectorAll(".filters button, .dropdown-content button").forEach(b=>{
    b.onclick=()=>{
        document.querySelectorAll(".filters button, .dropdown-content button").forEach(x=>x.classList.remove("active"));
        b.classList.add("active");
        render(b.dataset.cat);
    }
});

// ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¹Ø±Ø¨Ø©
function updateCartCount(){
    const cart=getLocalCart();
    let count=0;
    for(const key in cart) count += cart[key].quantity;
    const badge=document.getElementById("cartCount");
    badge.textContent=count;
    badge.style.display = count>0?"block":"none";
}
updateCartCount();
</script>
<script>
// ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ù…Ø´Ø±Ù
auth.onAuthStateChanged(async user=>{
    const profileM = document.getElementById("profileNav");
    const adminM = document.getElementById("adminNav");

    if(user){
        profileM.style.display="flex"; // Ø¯Ø§Ø¦Ù…Ù‹Ø§ ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const u = await db.collection("users").doc(user.uid).get();
        if(u.exists && u.data().role==="admin"){
            adminM.style.display="flex"; // ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù† Admin
        } else {
            adminM.style.display="none";
        }
    } else {
        profileM.style.display="none";
        adminM.style.display="none";
    }
})
// Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
const mobileBtn = document.querySelector(".mobile-filter-btn");
const mobileContent = document.querySelector(".mobile-filter-content");
mobileBtn.onclick = () => {
    mobileContent.classList.toggle("show");
}

// Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ÙØ±Ø¹ÙŠØ©
document.querySelectorAll(".mobile-submenu .sub-btn").forEach(btn=>{
    btn.onclick = () => {
        btn.classList.toggle("active");
        const sub = btn.nextElementSibling;
        if(sub) sub.style.display = sub.style.display==="flex"?"none":"flex";
    }
});

// Ø§Ø®ØªÙŠØ§Ø± Ø£ÙŠ Ù‚Ø³Ù… Ø±Ø¦ÙŠØ³ÙŠ Ø£Ùˆ ÙØ±Ø¹ÙŠ
mobileContent.querySelectorAll("button[data-cat]").forEach(b => {
    b.onclick = () => {
        render(b.dataset.cat);
        mobileContent.classList.remove("show"); // ÙŠØºÙ„Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
    }
});



;
</script>

<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<!-- SOCIAL FLOATING -->
<div class="social-float">
  <a href="https://facebook.com" target="_blank" class="social facebook">
    <i class="fab fa-facebook-f"></i>
  </a>

  <a href="https://tiktok.com" target="_blank" class="social tiktok">
    <i class="fab fa-tiktok"></i>
  </a>

  <a href="https://instagram.com" target="_blank" class="social instagram">
    <i class="fab fa-instagram"></i>
  </a>
</div>
<!-- MOBILE FILTER DROPDOWN -->



</body>
</html>
